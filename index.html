<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plate Calculator</title>
    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js"
      defer
    ></script>
  </head>
  <body>
    <div x-data="{plates: [], bar: 0}">
      <div>
        <input x-model="bar" type="radio" id="none" name="bar" value="0" />
        <label for="none">none - calculate weight for one side, no bar</label
        ><br />

        <input x-model="bar" type="radio" id="sz" name="bar" value="10" />
        <label for="sz">SZ-Barbell (10kg)</label><br />

        <input x-model="bar" type="radio" id="training" name="bar" value="15" />
        <label for="training">Training Barbell (15kg) </label><br />

        <input x-model="bar" type="radio" id="comp" name="bar" value="20" />
        <label for="comp">Competition Barbell (20kg) </label><br />
      </div>
      <div>
        <button @click="addPlate(plates, 5)">+5</button>
        <button @click="removePlate(plates, 5)">-5</button>
      </div>
      <div>
        <button @click="addPlate(plates, 10)">+10</button>
        <button @click="removePlate(plates, 10)">-10</button>
      </div>
      <div>
        <p>
          Barbell:
          <span x-text="bar"></span>
        </p>
        <p>
          Plates one Side:
          <span
            x-text="plates.sort(function(a, b){return a+b}).toString()"
          ></span>
        </p>
        <p>
          Weight one Side:
          <span x-text="calculateOneSide(plates)"></span>
        </p>
        <template x-if="bar>0">
          <p>
            Total:
            <span x-text="calculateTotal(bar, plates)"></span>
          </p>
        </template>
      </div>
    </div>
    <script>
      function addPlate(plates, weight) {
        plates.push(weight);
      }

      function removePlate(plates, weight) {
        var index = plates.indexOf(weight);
        if (index < 0) {
          return;
        }
        plates.splice(index, 1);
      }

      function calculateOneSide(plates) {
        return plates.reduce(add, 0);
      }

      function calculateTotal(bar, plates) {
        return add(parseFloat(bar), 2 * calculateOneSide(plates));
      }

      function add(a, b) {
        return a + b;
      }
    </script>
  </body>
</html>
